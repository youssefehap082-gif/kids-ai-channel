name: Daily Long Videos (2x)

on:
  schedule:
    # ØªØ´ØºÙŠÙ„ ÙƒÙ„ ÙŠÙˆÙ… Ù…Ø±ØªÙŠÙ† ÙÙŠ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù…Ø®ØªÙ„ÙØ© (11 ØµØ¨Ø§Ø­Ù‹Ø§ Ùˆ 9 Ù…Ø³Ø§Ø¡ Ø¨ØªÙˆÙ‚ÙŠØª Ù…ØµØ±)
    - cron: '0 9 * * *'
    - cron: '0 19 * * *'
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Set up job
        run: echo "ğŸš€ Starting Daily Long Videos job..."

      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: Install FFmpeg
        run: sudo apt-get install -y ffmpeg

      - name: Generate & upload long videos
        run: |
          echo "ğŸ¬ Generating long videos..."
          for i in 1 2; do
            python src/main_long.py || echo "âš ï¸ Upload failed, retrying in 2 hours..."
            sleep 5
          done
